<!DOCTYPE html>
<html>
<head>
    <title></title>
	<meta charset="utf-8" />
	<script>
		var text = [];
		function doTheThing(){
			var key = document.getElementById("bind").value;
			var output = "alias select"+alias+" \"bind "+key+" "+alias+";alias "+alias+" "+alias+"0; echo TextBindMenu_Selected_"+alias+";textbindmenustop\"\n";
			var text = text.trim().split("\n");
			for(var i = 0;i<text.length-1;i++){
				output += "alias "+alias+i+" \""+"say "+text[i]+";alias "+alias+" "+alias+(i+1)+"\"\n";
			}
			output += "alias "+alias+i+" \""+"say "+text[text.length-1]+";alias "+alias+" "+alias+"0\"\n";
			document.getElementById("output").value = output;
		}
		function goText() {
			text[text.length] = {
				text:document.getElementById("text").value.trim(),
				alias:document.getElementById("alias").value.trim(),
				textArray:document.getElementById("text").value.trim().split("\n")
			};
			document.getElementById("bindList").value += text[text.length - 1].alias + "\n";
			var tempOption = document.createElement("option");
			tempOption.text = text[text.length - 1].alias;
			document.getElementById("removeBindSelect").add(tempOption);
		}
		function goMenu() {
			var out = "bind " + document.getElementById("up").value.trim() + " +menuUp\n";
			out += "bind " + document.getElementById("down").value.trim() + " +menuDown\n";
			out += "bind " + document.getElementById("select").value.trim() + " +menuSelect\n";
			out += "bind " + document.getElementById("bind").value.trim() + " +menuBind\n";
			out += "cl_showfps 0\ndeveloper 1\ncon_filter_enable 0\ncon_filter_text \"\"\ncon_filter_text_out \"\"\n";
			out += "alias +menuUp clear\nalias +menuDown clear\nalias +menuSelect clear\nalias +menuBind clear\n";
			out += "alias -menuUp menuSelect" + (text.length - 1) + "\n";
			out += "alias -menuDown menuSelect1\n";
			out += "alias -menuSelect bindSelectBind0\n";
			out += "alias -menuBind noBindSelected\n";
			out += "alias noBindSelected \"echo <BindMenu>No Bind Selected\"";
			out += "\n//Menu Selectors:\n";
			var longestAliasLength = 0;
			for (var i = 0; i < text.length; i++) {
			    if (text[i].alias.length > longestAliasLength) {
			        longestAliasLength = text[i].alias.length;
			    }
			}
			for (var i = 0; i < text.length; i++) {
			    out += "alias menuSelect" + i + " \"alias -menuUp menuSelect" + ((i - 1 + text.length) % text.length) + ";alias -menuDown menuSelect" + ((i + 1 + text.length) % text.length) + ";alias -menuSelect bindSelectBind" + i + ";";
			    var bindsPerLine = (Math.floor(text.length / 6))?(Math.floor(text.length / 6)):1;
			    for (var j = 0; j < text.length; j += bindsPerLine) {
			        for (var k = 0; k < bindsPerLine-1; k++) {
			            if (text[j + k]) {
			                if (i == j+k) {
			                    out += "echo |->|<BindMenu>" + text[j+k].alias;
			                    for (var l = 0; l < longestAliasLength - text[j+k].alias.length; l++) {
			                        out += "-";
			                    }
			                }
			                else {
			                    out += "echo |..|<BindMenu>" + text[j+k].alias;
			                    for (var l = 0; l < longestAliasLength - text[j+k].alias.length; l++) {
			                        out += "-";
			                    }
			                }
			            }
			        }
					if(text[j+bindsPerLine-1]){
					    if (i == j+bindsPerLine-1) {
					        out += "|->|<BindMenu>" + text[j+bindsPerLine-1].alias + ";";
				    	}
				    	else {
				    	    out += "|..|<BindMenu>" + text[j+bindsPerLine-1].alias + ";";
				    	}
					}
					else {
                        out += ";"
					}
				}
				out += "\"\n";
			}

			out += "\n//Bind Selectors:\n";
			for (var i = 0; i < text.length; i++) {
			    out += "alias bindSelectBind" + i + " \"echo <BindMenu>" + text[i].alias + " selected!; alias -menuBind bindSaveSpot" + i + ";\"\n";
			}

			out += "\n//Bind Save Spots:\n";
			for (var i = 0; i < text.length; i++) {
			    out += "alias bindSaveSpot" + i + " " + text[i].alias + "0;\n";
			}

			out += "\n//Bind Text:\n";
			for (var i = 0; i < text.length; i++) {
			    for (var j = 0; j < text[i].textArray.length; j++) {
			        if (j == text[i].textArray.length - 1) {
			            out += "alias " + text[i].alias + j + " \"echo <BindMenu>Saying Line: " + (j + 1) + "/" + text[i].textArray.length + " in " + text[i].alias + ". Bind Completed!; say " + text[i].textArray[j] + "; alias -menuBind noBindSelected; alias bindSaveSpot" + i + " " + text[i].alias + "0\"\n";
			        }
			        else {
			            out += "alias " + text[i].alias + j + " \"echo <BindMenu>Saying Line: " + (j + 1) + "/" + text[i].textArray.length + " in " + text[i].alias + "; say " + text[i].textArray[j] + "; alias bindSaveSpot" + i + " " + text[i].alias + ((j + 1) % text[i].textArray.length) + ";\"\n";
			        }
			    }
			}
			
			var exp = "";
			for (var i = 0; i < text.length; i++) {
				exp += "text[text.length]={ alias:\"" + text[i].alias + "\",textArray:[";
				for(var j = 0; j < text[i].textArray.length; j++){
					exp += "\"" + text[i].textArray[j] + "\",";
				}
				exp += "]};addRemoveBindSelect(\""+text[i].alias+"\");";
			}
			document.getElementById("output").value = out + "\n//Import Code (don't copy the //):\n//" + exp;
			document.getElementById("export").value = exp;
		}
		function removeBind() {
			text.splice(document.getElementById("removeBindSelect").selectedIndex, 1);
			document.getElementById("removeBindSelect").remove(document.getElementById("removeBindSelect").selectedIndex);
			document.getElementById("bindList").value = "";
			for (var i = 0; i < text.length; i++) {
				document.getElementById("bindList").value += text[i].alias + "\n";
			}
		}
		function addRemoveBindSelect(s) {
			var tempOption = document.createElement("option");
			tempOption.text = s;
			document.getElementById("removeBindSelect").add(tempOption);
		}
		function importBinds() {
			eval(document.getElementById("import").value);
			document.getElementById("bindList").value = "";
			for (var i = 0; i < text.length; i++) {
				document.getElementById("bindList").value += text[i].alias + "\n";
			}
			document.getElementById("import").value = "";
		}
		function generateRandomBind() {
			var rand_length = 5000;
			var rand_chance = 0.02;
			
			var ran = "host_writeconfig random_backup\n";

			ran += "\nbind w +random_w\n";
			ran += "bind a +random_a\n";
			ran += "bind s +random_s\n";
			ran += "bind d +random_d\n";
			ran += "bind mouse1 +random_fire\n";
			
			ran += "\nalias step_message \"say *steps on a landmine*\"\n";
			ran += "alias avoid_message \"say *avoids a landmine*\"\n";
			
			ran += "alias load_message \"say Minesweeper CS:GO Edition Loaded!\"\n";
			
			ran += "\nalias +suprise_fire detonate_0\n";
			ran += "alias -suprise_fire detonate_0\n";
			
			ran += "\nalias detonate_0 \"step_message;\"\n";
			ran += "alias detonate_1 \"disconnect\"\n";
			
			ran += "\nalias +random_w \"+forward;random\"\n";
			ran += "alias -random_w \"-forward;random\"\n";
			ran += "alias +random_a \"+moveleft;random\"\n";
			ran += "alias -random_a \"-moveleft;random\"\n";
			ran += "alias +random_s \"+back;random\"\n";
			ran += "alias -random_s \"-back;random\"\n";
			ran += "alias +random_d \"+moveright;random\"\n";
			ran += "alias -random_d \"-moveright;random\"\n";
			ran += "alias +random_fire \"+attack;\"\n";
			ran += "alias -random_fire \"-attack;random\"\n";
			
			
			ran += "\nalias suprise_disconnect_on \"bind mouse1 +suprise_fire\"\n";
			ran += "alias suprise_disconnect_off \"bind mouse1 +random_fire\"\n";

			ran += "\nalias random random_0_0\n";
			
			for(var i = 0; i < rand_length; i++){
				if(Math.random() > 1-rand_chance){
					ran += "alias random_" + (i) + "_0 \"suprise_disconnect_on; alias random random_" + (i) + "_1\"\n";
					ran += "alias random_" + (i) + "_1 \"suprise_disconnect_off; avoid_message; alias random random_" + (i+1) + "_0\"\n";
				} else {
					ran += "alias random_" + (i) + "_0 \"suprise_disconnect_off; alias random random_" + (i+1) + "_0\"\n";
				}
			}
			
			if(Math.random() > 1-rand_chance){
				ran += "alias random_" + (rand_length) + "_0 \"suprise_disconnect_on; alias random random_" + (rand_length) + "_1\"\n";
				ran += "alias random_" + (rand_length) + "_1 \"suprise_disconnect_off; avoid_message; alias random random_" + 0 + "_0\"\n";
			} else {
				ran += "alias random_" + (rand_length) + "_0 \"suprise_disconnect_off; alias random random_" + 0 + "_0\"\n";
			}

			ran += "\nload_message\n";
			
			document.getElementById("random").value = ran;
			
		}
	</script>
</head>
<body>
	
	<table>
		<tr>
			<td>
				<h2>Menu:</h2>
				Up: <input type="text" id="up"><br />
				Down: <input type="text" id="down"><br />
				Select: <input type="text" id="select"><br />
				Bind: <input type="text" id="bind"><br />
				<textarea id="bindList" readonly cols="50" rows="15"></textarea><br />
				Remove a Bind:<br />
				<select id="removeBindSelect"></select><button onclick=removeBind()>Remove</button>
			</td>
			<td>
				<h2>Entries:</h2>
				Text:<br />
				<textarea id="text" cols="50" rows="15"></textarea><br />
				Alias: <input type="text" id="alias"><br />
				<button onClick=goText()>Add Bind</button><br />
			</td>
		</tr>
	</table>
	<button onClick=goMenu()>Generate Code</button><br />
	Output:<br />
	<textarea id="output" readonly cols="100" rows="15"></textarea><br />
	Export:<br />
	<textarea id="export" readonly cols="100" rows="15"></textarea><br />
	Import:<br />
	<textarea id="import" cols="100" rows="15"></textarea><br />
	<button onclick=importBinds()>Import</button><br />
	Random Bullshit:<br />
	<textarea id="random" cols="100" rows="15"></textarea><br />
	<button onclick=generateRandomBind()>Generate</button><br />
</body>
</html>
